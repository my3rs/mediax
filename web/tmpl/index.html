{{ define "main" }}
<main>
    <div class="search-box-container">
        <form class="search-box" action="/search" method="get">
            <div class="search-bar">
                <input class="search-input" type="text" name="q" placeholder="搜索标题..." maxlength="32"/>
                <select class="search-select" name="subject_type">
                    <option value="all">全部</option>
                    <option value="book">图书</option>
                    <option value="movie">电影</option>
                    <option value="tv">剧集</option>
                    <option value="anime">番剧</option>
                    <option value="game">游戏</option>
                </select>
                <button class="search-button" type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" height="22px" fill="#fff"><path d="M43.4 16.8c-15 0-27.3 12.3-27.3 27.3s12.3 27.3 27.3 27.3c5.1 0 9.9-1.4 14-3.9l18.4 17.3c1.4 1.3 3.7 1.3 5-.2l.7-.8c1.3-1.4 1.3-3.7-.2-5L63.7 62.3c4.3-4.8 7-11.2 7-18.2 0-15-12.3-27.3-27.3-27.3zm0 7.9c10.7 0 19.4 8.6 19.4 19.4s-8.6 19.4-19.4 19.4S24 54.9 24 44.1c0-10.7 8.7-19.4 19.4-19.4z"></path></svg>
                    <span>搜索</span>
                </button>
            </div>
        </form>
    </div>
    
    <section class="home-section">
        <div class="home-header">
            <a href="/book"><h2 class="page-title">最近图书</h2></a>
            {{ if not .FewBooks }}
            <a class="home-add" href="/add?subject_type=book">添加图书+</a>
            {{ end }}
        </div>
        <div class="home-list">
            {{ if .FewBooks }}
            <div class="home-item">
                <a href="/add?subject_type=book">
                <div class="home-item-cover add-selection">
                    <img src="/static/icons/icon-book.svg" alt="book" width="50" height="50">
                    <div class="home-item-name note-color">添加图书</div>
                </div>
                </a>
            </div>
            {{ end }}
            {{ range .RecentBooks  }}
            <div class="home-item">
                <div class="home-item-cover">
                    {{ if .IsDoing }}
                    <span class="item-badge"></span>
                    {{ end }}
                    <a href='{{ .SubjectURL }}'>
                        <img class="home-item-img" src="{{ .ImageURL }}" loading="lazy">
                    </a>
                </div>
                <div class="home-item-name">{{ .Title }}</div>
            </div>
            {{ end }}
        </div>
    </section>

    <section class="home-section">
        <div class="home-header">
            <a href="/movie"><h2 class="page-title">最近电影</h2></a>
            {{ if not .FewMovies }}
            <a class="home-add" href="/add?subject_type=movie">添加电影+</a>
            {{ end }}
        </div>
        <div class="home-list">
            {{ if .FewMovies }}
            <div class="home-item">
                <a href="/add?subject_type=movie">
                <div class="home-item-cover add-selection">
                    <img src="/static/icons/icon-movie.svg" alt="movie" width="50" height="50">
                    <div class="home-item-name note-color">添加电影</div>
                </div>
                </a> 
            </div>
            {{ end }}
            {{ range .RecentMovies  }}
            <div class="home-item">
                <div class="home-item-cover">
                    {{ if .IsDoing }}
                    <span class="item-badge"></span>
                    {{ end }}
                    <a href='{{ .SubjectURL }}'>
                        <img class="home-item-img" src="{{ .ImageURL }}" loading="lazy">
                    </a>
                </div>
                <div class="home-item-name">{{ .Title }}</div>
            </div>
            {{ end }}
        </div>
    </section>

    <section class="home-section">
        <div class="home-header">
            <a href="/tv"><h2 class="page-title">最近剧集</h2></a>
            {{ if not .FewTVs }}
            <a class="home-add" href="/add?subject_type=tv">添加剧集+</a>
            {{ end }}
        </div>
        <div class="home-list">
            {{ if .FewTVs }}
            <div class="home-item">
                <a href="/add?subject_type=tv">
                    <div class="home-item-cover add-selection">
                        <img src="/static/icons/icon-tv.svg" alt="tv" width="50" height="50">
                        <div class="home-item-name note-color">添加剧集</div>
                    </div>
                </a>
            </div>
            {{ end }}
            {{ range .RecentTVs  }}
            <div class="home-item">
                <div class="home-item-cover">
                    {{ if .IsDoing }}
                    <span class="item-badge"></span>
                    {{ end }}
                    <a href='{{ .SubjectURL }}'>
                        <img class="home-item-img" src="{{ .ImageURL }}" loading="lazy">
                    </a>
                </div>
                <div class="home-item-name">{{ .Title }}</div>
            </div>
            {{ end }}
        </div>
    </section>

    <section class="home-section">
        <div class="home-header">
            <a href="/anime"><h2 class="page-title">最近番剧</h2></a>
            {{ if not .FewAnimes }}
            <a class="home-add" href="/add?subject_type=anime">添加番剧+</a>
            {{ end }}
        </div>
        <div class="home-list">
            {{ if .FewAnimes }}
            <div class="home-item">
                <a href="/add?subject_type=anime">
                    <div class="home-item-cover add-selection">
                        <img src="/static/icons/icon-anime.svg" alt="anime" width="50" height="50">
                        <div class="home-item-name note-color">添加番剧</div>
                    </div>
                </a>
            </div>
            {{ end }}
            {{ range .RecentAnimes  }}
            <div class="home-item">
                <div class="home-item-cover">
                    {{ if .IsDoing }}
                    <span class="item-badge"></span>
                    {{ end }}
                    <a href='{{ .SubjectURL }}'>
                        <img class="home-item-img" src="{{ .ImageURL }}" loading="lazy">
                    </a>
                </div>
                <div class="home-item-name">{{ .Title }}</div>
            </div>
            {{ end }}
        </div>
    </section>

    <section class="home-section">
        <div class="home-header">
            <a href="/game"><h2 class="page-title">最近游戏</h2></a>
            {{ if not .FewGames }}
            <a class="home-add" href="/add?subject_type=game">添加游戏+</a>
            {{ end }}
        </div>
        <div class="home-list">
            {{ if .FewGames }}
            <div class="home-item">
                <a href="/add?subject_type=game">
                    <div class="home-item-cover add-selection">
                        <img src="/static/icons/icon-game.svg" alt="game" width="50" height="50">
                        <div class="home-item-name note-color">添加游戏</div>
                    </div> 
                </a>
            </div>
            {{ end }}
            {{ range .RecentGames  }}
            <div class="home-item">
                <div class="home-item-cover">
                    {{ if .IsDoing }}
                    <span class="item-badge"></span>
                    {{ end }}
                    <a href='{{ .SubjectURL }}'>
                        <img class="home-item-img" src="{{ .ImageURL }}" loading="lazy">
                    </a>
                </div>
                <div class="home-item-name">{{ .Title }}</div>
            </div>
            {{ end }}
        </div>
    </section>
</main>
{{ end }}
